(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})})(this,function(t){"use strict";function e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(n,t)}}function n(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i(t,e,n){return t=r(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function r(t,e,n){return function(i){var r=lt;lt=i;try{t.call(this,this.__data__,e,n)}finally{lt=r}}}function o(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function s(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;o>i;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function a(t,e,n){var o=ht.hasOwnProperty(t.type)?i:r;return function(i,r,s){var a,h=this.__on,l=o(e,r,s);if(h)for(var u=0,c=h.length;c>u;++u)if((a=h[u]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=l,a.capture=n),void(a.value=e);this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,capture:n},h?h.push(a):this.__on=[a]}}function h(){}function l(){return[]}function u(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function c(t,e,n,i,r,o){for(var s,a=0,h=e.length,l=o.length;l>a;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new u(t,o[a]);for(;h>a;++a)(s=e[a])&&(r[a]=s)}function f(t,e,n,i,r,o,s){var a,h,l,c={},f=e.length,d=o.length,p=new Array(f);for(a=0;f>a;++a)(h=e[a])&&(p[a]=l=St+s.call(h,h.__data__,a,e),l in c?r[a]=h:c[l]=h);for(a=0;d>a;++a)l=St+s.call(t,o[a],a,o),(h=c[l])?(i[a]=h,h.__data__=o[a],c[l]=null):n[a]=new u(t,o[a]);for(a=0;f>a;++a)(h=e[a])&&c[p[a]]===h&&(r[a]=h)}function d(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function p(t){return function(){this.removeAttribute(t)}}function g(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m(t,e){return function(){this.setAttribute(t,e)}}function y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function v(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function _(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function x(t){return function(){this.style.removeProperty(t)}}function w(t,e,n){return function(){this.style.setProperty(t,e,n)}}function b(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function S(t){return function(){delete this[t]}}function A(t,e){return function(){this[t]=e}}function T(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function C(t){return t.trim().split(/^|\s+/)}function N(t){return t.classList||new H(t)}function H(t){this._node=t,this._names=C(t.getAttribute("class")||"")}function E(t,e){for(var n=N(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function R(t,e){for(var n=N(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function M(t){return function(){E(this,t)}}function W(t){return function(){R(this,t)}}function L(t,e){return function(){(e.apply(this,arguments)?E:R)(this,t)}}function B(){this.textContent=""}function O(t){return function(){this.textContent=t}}function j(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function I(){this.innerHTML=""}function z(t){return function(){this.innerHTML=t}}function P(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function k(){this.nextSibling&&this.parentNode.appendChild(this)}function F(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function D(){return null}function V(){var t=this.parentNode;t&&t.removeChild(this)}function G(t,e,n){var i=jt(t),r=i.CustomEvent;r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function q(t,e){return function(){return G(this,t,e)}}function K(t,e){return function(){return G(this,t,e.apply(this,arguments))}}function $(t,e){this._groups=t,this._parents=e}function U(){return new $([[document.documentElement]],Yt)}function Y(t){return t&&t.__esModule?t["default"]:t}function X(t,e){return e={exports:{}},t(e,e.exports),e.exports}function J(t,e,n){function i(t,e,n){e&&ee.mergeRecursive(t,e),"object"==typeof n&&null!==n?ee.mergeRecursive(t,n):t.text.push(n)}var r,o,s,a,h,l,u=0,c=n.shift(),f=n;for(e=e||{},t=t||{},i(e.title=e.title||{},t.title,c),e.body=e.body||[];s=f.shift();){if(h=e.body[u],h||e.body.push(h=[]),s instanceof Array)for(r=0,o=s.length;o>r;r++)l=h[r],l||h.push(l={}),a=s[r],i(l,t.body,a);else l=h[0],h.push(l={}),i(l,t.body,s),h.splice(1);u++}}function Q(t){var e;this.config=t||{},this.smartlabel=new te(Math.random()),this.verticalLimit=void 0,this.horizontalLimit=void 0,this.data=null,this.model=null,this.mountPoint=null,this._firables=null,this._context=null,this.clsNS=this.config.namespace,this.baseClassName=this.clsNS?this.clsNS+"-d3-tooltip":"d3-tooltip",e=this.baseClassName+"-body",this.title={model:null,args:{className:this.baseClassName+"-title",padding:[2,5,5],margin:[2,5]},_graphics:{}},this.body={model:null,args:{className:e,padding:[2,5,5],margin:[2,5],icon:{className:e+"-icon",_size:null},text:{className:e+"-text"}},_graphics:{}}}function Z(){function t(t,e){var n=t.node().__mounter||h;n.mount(e)}function e(t,e,n){return function(){var i=[].slice.call(arguments,0),r=pt(this);i.push(r),i.push(this),e[t].apply(n,i)}}function n(t,n){return t.on("mouseover.d3-tooltip",e(0,n,r)),t.on("mousemove.d3-tooltip",e(1,n,r)),t.on("mouseout.d3-tooltip",e(2,n,r)),t}function i(t){p?t.each(function(t){this.__mounter.addData(t).mountTo(r)}):(r=o.append("g"),f=[i._onMouseOver,i._onMouseMove,i._onMouseOut],t.each(function(t){n(Xt(this),f),h=this.__mounter=new Q({namespace:d}).addData(t).mountTo(r)})),p=!0}var r,o,s,a,h,l=null,u={x:5,y:5},c=null,f=[],d=null,p=!1;return i.attachTo=function(t){return o=t,i},i.offset=function(t){return ee.mergeRecursive(u={},t),i},i.show=function(e,n){n||(n=h),e||(e=a),t(s,{pos:e});var i,o,l=!1,f=e;return i=n.size(),c?(c.width&&(f[0]+u.x+i.width>c.width?f[0]-u.x-i.width<0?(f[0]=0,l=!0):f[0]-=u.x+i.width:f[0]+=u.x),(c.height||l)&&(c.height=c.height||Number.POSITIVE_INFINITY,o=l?3*u.y:u.y,f[1]+o+i.height>c.height?f[1]-=o+i.height:f[1]+=o)):(f[0]+=u.x,f[1]+=u.y),r.style("display","block").attr("transform","translate("+f[0]+", "+f[1]+")")},i.hide=function(){return r.style("display","none")},i.constrain=function(t,e){return c={width:t,height:e},i},i.track=function(t){return l=t&&"function"==typeof t&&t,i},i.namespace=function(t){return d=t,i},l=i._getDefaultTrack=function(t,e,n,i){return i},i._onMouseOver=function(){return this.style("display","block")},i._onMouseMove=function(){var t=a=l.apply(r,[].slice.call(arguments,0)),e=arguments[4];s=Xt(e),i.show(t,e.__mounter)},i._onMouseOut=i.hide,i}var tt="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),et.hasOwnProperty(e)?{space:et[e],local:t}:t},it=function(t){var i=nt(t);return(i.local?n:e)(i)},rt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var ot=document.documentElement;if(!ot.matches){var st=ot.webkitMatchesSelector||ot.msMatchesSelector||ot.mozMatchesSelector||ot.oMatchesSelector;rt=function(t){return function(){return st.call(this,t)}}}}var at=rt,ht={},lt=null;if("undefined"!=typeof document){var ut=document.documentElement;"onmouseenter"in ut||(ht={mouseenter:"mouseover",mouseleave:"mouseout"})}var ct=function(t,e,n){var i,r,h=o(t+""),l=h.length;{if(!(arguments.length<2)){for(u=e?a:s,null==n&&(n=!1),i=0;l>i;++i)this.each(u(h[i],e,n));return this}var u=this.node().__on;if(u)for(var c,f=0,d=u.length;d>f;++f)for(i=0,c=u[f];l>i;++i)if((r=h[i]).type===c.type&&r.name===c.name)return c.value}},ft=function(){for(var t,e=lt;t=e.sourceEvent;)e=t;return e},dt=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]},pt=function(t){var e=ft();return e.changedTouches&&(e=e.changedTouches[0]),dt(t,e)},gt=function(t){return null==t?h:function(){return this.querySelector(t)}},mt=function(t){"function"!=typeof t&&(t=gt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;n>r;++r)for(var o,s,a=e[r],h=a.length,l=i[r]=new Array(h),u=0;h>u;++u)(o=a[u])&&(s=t.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),l[u]=s);return new $(i,this._parents)},yt=function(t){return null==t?l:function(){return this.querySelectorAll(t)}},vt=function(t){"function"!=typeof t&&(t=yt(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;n>o;++o)for(var s,a=e[o],h=a.length,l=0;h>l;++l)(s=a[l])&&(i.push(t.call(s,s.__data__,l,a)),r.push(s));return new $(i,r)},_t=function(t){"function"!=typeof t&&(t=at(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;n>r;++r)for(var o,s=e[r],a=s.length,h=i[r]=[],l=0;a>l;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&h.push(o);return new $(i,this._parents)},xt=function(t){return new Array(t.length)},wt=function(){return new $(this._enter||this._groups.map(xt),this._parents)};u.prototype={constructor:u,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var bt=function(t){return function(){return t}},St="$",At=function(t,e){if(!t)return g=new Array(this.size()),l=-1,this.each(function(t){g[++l]=t}),g;var n=e?f:c,i=this._parents,r=this._groups;"function"!=typeof t&&(t=bt(t));for(var o=r.length,s=new Array(o),a=new Array(o),h=new Array(o),l=0;o>l;++l){var u=i[l],d=r[l],p=d.length,g=t.call(u,u&&u.__data__,l,i),m=g.length,y=a[l]=new Array(m),v=s[l]=new Array(m),_=h[l]=new Array(p);n(u,d,y,v,_,g,e);for(var x,w,b=0,S=0;m>b;++b)if(x=y[b]){for(b>=S&&(S=b+1);!(w=v[S])&&++S<m;);x._next=w||null}}return s=new $(s,i),s._enter=a,s._exit=h,s},Tt=function(){return new $(this._exit||this._groups.map(xt),this._parents)},Ct=function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;o>a;++a)for(var h,l=e[a],u=n[a],c=l.length,f=s[a]=new Array(c),d=0;c>d;++d)(h=l[d]||u[d])&&(f[d]=h);for(;i>a;++a)s[a]=e[a];return new $(s,this._parents)},Nt=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},Ht=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=d);for(var n=this._groups,i=n.length,r=new Array(i),o=0;i>o;++o){for(var s,a=n[o],h=a.length,l=r[o]=new Array(h),u=0;h>u;++u)(s=a[u])&&(l[u]=s);l.sort(e)}return new $(r,this._parents).order()},Et=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},Rt=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Mt=function(){for(var t=this._groups,e=0,n=t.length;n>e;++e)for(var i=t[e],r=0,o=i.length;o>r;++r){var s=i[r];if(s)return s}return null},Wt=function(){var t=0;return this.each(function(){++t}),t},Lt=function(){return!this.node()},Bt=function(t){for(var e=this._groups,n=0,i=e.length;i>n;++n)for(var r,o=e[n],s=0,a=o.length;a>s;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},Ot=function(t,e){var n=nt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?g:p:"function"==typeof e?n.local?_:v:n.local?y:m)(n,e))},jt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},It=function(t,e,n){var i;return arguments.length>1?this.each((null==e?x:"function"==typeof e?b:w)(t,e,null==n?"":n)):jt(i=this.node()).getComputedStyle(i,null).getPropertyValue(t)},zt=function(t,e){return arguments.length>1?this.each((null==e?S:"function"==typeof e?T:A)(t,e)):this.node()[t]};H.prototype={add:function(t){var e=this._names.indexOf(t);0>e&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Pt=function(t,e){var n=C(t+"");if(arguments.length<2){for(var i=N(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?L:e?M:W)(n,e))},kt=function(t){return arguments.length?this.each(null==t?B:("function"==typeof t?j:O)(t)):this.node().textContent},Ft=function(t){return arguments.length?this.each(null==t?I:("function"==typeof t?P:z)(t)):this.node().innerHTML},Dt=function(){return this.each(k)},Vt=function(){return this.each(F)},Gt=function(t){var e="function"==typeof t?t:it(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},qt=function(t,e){var n="function"==typeof t?t:it(t),i=null==e?D:"function"==typeof e?e:gt(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},Kt=function(){return this.each(V)},$t=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Ut=function(t,e){return this.each(("function"==typeof e?K:q)(t,e))},Yt=[null];$.prototype=U.prototype={constructor:$,select:mt,selectAll:vt,filter:_t,data:At,enter:wt,exit:Tt,merge:Ct,order:Nt,sort:Ht,call:Et,nodes:Rt,node:Mt,size:Wt,empty:Lt,each:Bt,attr:Ot,style:It,property:zt,classed:Pt,text:kt,html:Ft,raise:Dt,lower:Vt,append:Gt,insert:qt,remove:Kt,datum:$t,on:ct,dispatch:Ut};var Xt=function(t){return"string"==typeof t?new $([[document.querySelector(t)]],[document.documentElement]):new $([[t]],Yt)},Jt=X(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={init:function(t){var e=t.document,i=t.navigator,r=i.userAgent,o="DIV",s=Math.ceil,a=Math.floor,h=0,l="fusioncharts-smartlabel-",u=l+"container",c=l+"tag",f=l+"br";return n={win:t,containerClass:u,classNameWithTag:c,classNameWithTagBR:f,maxDefaultCacheLimit:500,classNameReg:new RegExp("\b"+c+"\b"),classNameBrReg:new RegExp("\b"+f+"\b"),spanAdditionRegx:/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/gi,spanAdditionReplacer:'$1<span class="'+c+'">$2</span>',spanRemovalRegx:new RegExp("\\<span[^\\>]+?"+c+"[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),xmlTagRegEx:new RegExp("<[^>][^<]*[^>]+>","i"),ltgtRegex:/&lt;|&gt;/g,brReplaceRegex:/<br\/>/gi,testStrAvg:"WgI",parentContainerStyle:{position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",fontStyle:"font-style","font-style":"font-style"},getDocumentSupport:function(){var n,i,o;return e.getElementsByClassName?(n="getElementsByClassName",i=c,o=!0):(n="getElementsByTagName",i="span",o=!1),{isIE:/msie/i.test(r)&&!t.opera,hasSVG:Boolean(t.SVGAngle||e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),isHeadLess:new RegExp(" HtmlUnit").test(r),isWebKit:new RegExp(" AppleWebKit/").test(r),childRetriverFn:n,childRetriverString:i,noClassTesting:o}},createContainer:function(t){var n,i;if(t&&(t.offsetWidth||t.offsetHeight)){if(t.appendChild)return t.appendChild(i=e.createElement(o)),i.className=u,i.setAttribute("aria-hidden","true"),i.setAttribute("role","presentation"),i}else if(n=e.getElementsByTagName("body")[0],n&&n.appendChild)return i=e.createElement(o),i.className=u,i.setAttribute("aria-hidden","true"),i.setAttribute("role","presentation"),h+=1,n.appendChild(i),i},getNearestBreakIndex:function(t,e,n){if(!t||!t.length)return 0;var i,r=n._getWidthFn(),o=0,h=0,l=r(t),u=l/t.length;if(i=e,o=s(e/u),e>l)return t.length-1;for(o>t.length&&(i=e-l,o=t.length);i>0;){if(i=e-r(t.substr(0,o)),h=a(i/u),!h)return o;o+=h}for(;0>i;){if(i=e-r(t.substr(0,o)),h=a(i/u),!h)return o;o+=h}return o},setLineHeight:function(t){var e=t.fontSize=t.fontSize||"12px";return t.lineHeight=t.lineHeight||t["line-height"]||1.2*parseInt(e,10)+"px",t}}}};e["default"]=n,t.exports=e["default"]}),Qt=X(function(t){function e(t){return t&&t.__esModule?t:{"default":t}}function n(t,e,n){var i;n=n>5?n:5,n=20>n?n:20,this.maxContainers=n,this.first=null,this.last=null,this.containers={},this.length=0,this.rootNode=t,e&&(i=s.createElementNS("http://www.w3.org/2000/svg","svg"),i.setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),i.setAttributeNS("http://www.w3.org/2000/svg","height","0"),i.setAttributeNS("http://www.w3.org/2000/svg","width","0"),this.svgRoot=i,this.rootNode.appendChild(i))}var i=Jt,r=e(i),o=r["default"].init("undefined"!=typeof window?window:void 0),s=o.win.document,a=o.getDocumentSupport(),h=a.isWebKit?0:4.5;n.prototype.get=function(t){var e,n,i,r=this.containers,s=this.length,a=this.maxContainers,h="";for(n in o.supportedStyle)void 0!==t[n]&&(h+=o.supportedStyle[n]+":"+t[n]+";");if(!h)return!1;if(i=r[h])this.first!==i&&(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.next=this.first,i.next.prev=i,this.last===i&&(this.last=i.prev),i.prev=null,this.first=i);else{if(s>=a)for(e=s-a+1;e--;)this.removeContainer(this.last);i=this.addContainer(h)}return i},n.prototype.addContainer=function(t){var e,n;return this.containers[t]=n={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,dotWidth:0,avgCharWidth:4,keyStr:t,charCache:{}},n.next=this.first,n.next&&(n.next.prev=n),this.first=n,this.last||(this.last=n),this.length+=1,e=n.node=s.createElement("div"),this.rootNode.appendChild(e),a.isIE&&!a.hasSVG?e.style.setAttribute("cssText",t):e.setAttribute("style",t),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),e.style.display="inline-block",e.innerHTML=o.testStrAvg,n.lineHeight=e.offsetHeight,n.avgCharWidth=e.offsetWidth/3,a.isBrowserLess?(e=n.svgText=s.createElementNS("http://www.w3.org/2000/svg","text"),e.setAttribute("style",t),this.svgRoot.appendChild(e),e.textContent=o.testStrAvg,n.lineHeight=e.getBBox().height,n.avgCharWidth=(e.getBBox().width-h)/3,e.textContent="...",n.ellipsesWidth=e.getBBox().width-h,e.textContent=".",n.dotWidth=e.getBBox().width-h):(e.innerHTML="...",n.ellipsesWidth=e.offsetWidth,e.innerHTML=".",n.dotWidth=e.offsetWidth,e.innerHTML=""),n},n.prototype.removeContainer=function(t){var e=t.keyStr;e&&this.length&&t&&(this.length-=1,t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev),t.node.parentNode.removeChild(t.node),delete this.containers[e])},n.prototype.dispose=function(){var t,e=this.containers;this.maxContainers=null;for(t in e)this.removeContainer(e[t]);this.rootNode.parentNode.removeChild(this.rootNode),this.rootNode=null,this.first=null,this.last=null},t.exports=n}),Zt=X(function(t,e){function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n,r){var o,s,u,c,f=!1,d=i.store;if("undefined"!=typeof t&&"object"!=typeof t){(c=d[t])&&c.dispose(),d[t]=this,r=r||{},r.maxCacheLimit=isFinite(u=r.maxCacheLimit)?u:h.maxDefaultCacheLimit,"string"==typeof e&&(e=l.getElementById(e)),o=h.createContainer(e),o.innerHTML=h.testStrAvg,(g.isHeadLess||!g.isIE&&!o.offsetHeight&&!o.offsetWidth)&&(f=!0),o.innerHTML="";for(s in h.parentContainerStyle)o.style[s]=h.parentContainerStyle[s];this.id=t,this.parentContainer=o,this._containerManager=new a["default"](o,f,10),this._showNoEllipses=!n,this._init=!0,this.style={},this.options=r,this.setStyle()}}Object.defineProperty(e,"__esModule",{value:!0});var r=Jt,o=n(r),s=Qt,a=n(s),h=o["default"].init("undefined"!=typeof window?window:void 0),l=h.win.document,u=h.win.Math,c=u.max,f=u.round,d="",p={" ":"&nbsp;"},g=h.getDocumentSupport(),m=g.isWebKit?0:4.5;i.textToLines=function(t){return t=t||{},t.text?"string"!=typeof t.text&&(t.text=t.text.toString()):t.text="",t.lines=t.text.split(/\n|<br\s*?\/?>/gi),t},i.store={},i.prototype._calCharDimWithCache=function(t,e,n){if(!this._init)return!1;var i,r,o,s,a,h,l=this.options.maxCacheLimit,u=this._container,c=this.style||{},f=this._advancedCache||(this._advancedCache={}),g=this._advancedCacheKey||(this._advancedCacheKey=[]),m=t+(c.fontSize||d)+(c.fontFamily||d)+(c.fontWeight||d)+(c.fontStyle||d),y=t+"init"+(c.fontSize||d)+(c.fontFamily||d)+(c.fontWeight||d)+(c.fontStyle||d);return p[t]&&(t=p[t]),e?void 0===(h=f[y])&&(u.innerHTML=t.repeat?t.repeat(n):Array(n+1).join(t),o=u.offsetWidth,u.innerHTML=t,s=u.offsetWidth,h=f[y]=(o-n*s)/(n+1),g.push(y),g.length>l&&delete f[g.shift()]):h=0,(a=f[m])?(r=a.split(","),{width:parseFloat(r[0],10),height:parseFloat(r[1],10)}):(u.innerHTML=t,i={height:u.offsetHeight,width:u.offsetWidth+h},f[m]=i.width+","+i.height,g.push(m),g.length>l&&delete f[g.shift()],i)},i.prototype._getWidthFn=function(){var t=this._containerObj,e=this._container,n=t.svgText;return n?function(t){var e,i;return n.textContent=t,e=n.getBBox(),i=e.width-m,1>i&&(i=e.width),i}:function(t){return e.innerHTML=t,e.offsetWidth}},i.prototype.setStyle=function(t){if(!this._init)return this;var e;if(t!==this.style||this._styleNotSet)return t||(t=this.style),h.setLineHeight(t),this.style=t,this._containerObj=e=this._containerManager.get(t),this._containerObj?(this._container=e.node,this._context=e.context,this._cache=e.charCache,this._lineHeight=e.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0,this},i.prototype.useEllipsesOnOverflow=function(t){return this._init?(this._showNoEllipses=!t,this):this},i.prototype.getSmartText=function(t,e,n,i){if(!this._init)return!1;void 0===t||null===t?t="":"string"!=typeof t&&(t=t.toString());var r,o,s,a,u,f,d,p,m,y,v,_,x,w,b,S,A,T,C,N,H,E,R,M,W,L,B=!1,O=0,j=-1,I=-1,z=-1,P=0,k=0,F=[],D=0,V=this._showNoEllipses?"":"...",G=this._lineHeight,q=this._context,K=this._container,$=this._containerObj,U=$.ellipsesWidth,Y=$.dotWidth,X=[],J=-1,Q=-1,Z=-1,tt=function(t){t=t.replace(/^\s\s*/,"");for(var e=/\s/,n=t.length;e.test(t.charAt(n-=1)););return t.slice(0,n+1)},et={text:t,maxWidth:e,maxHeight:n,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:t,isTruncated:!1};if(_=this._getWidthFn(),n===G&&(n*=1.2),K){if(!g.isBrowserLess){if(B=h.xmlTagRegEx.test(t),B?(K.innerHTML=t,et.oriTextWidth=d=K.offsetWidth,et.oriTextHeight=p=K.offsetHeight):(a=t.replace(h.ltgtRegex,function(t){return"&lt;"===t?"<":">"}),b=this.getOriSize(a,!0),et.oriTextWidth=d=b.width,et.oriTextHeight=p=b.height),n>=p&&e>=d)return et.width=et.oriTextWidth=d,et.height=et.oriTextHeight=p,et;if(G>n)return et.text="",et.width=et.oriTextWidth=0,et.height=et.oriTextHeight=0,et}if(t=tt(t).replace(/(\s+)/g," "),u=this._showNoEllipses?e:e-U,!B){if(F=t.split(""),r=F.length,o="",s=[],v=F[0],this._cache[v]?C=this._cache[v].width:(C=_(v),this._cache[v]={width:C}),u>C)s=t.substr(0,h.getNearestBreakIndex(t,u,this)).split(""),D=s.length;else{if(C>e)return et.text="",et.width=et.oriTextWidth=et.height=et.oriTextHeight=0,et;V&&(u=e-2*Y,u>C?V="..":(u=e-Y,u>C?V=".":(u=0,V="")))}if(P=_(s.join("")),k=this._lineHeight,i){for(;r>D;D+=1)if(v=s[D]=F[D],this._cache[v]?C=this._cache[v].width:(b&&(C=b.detailObj[v])||(C=_(v)),this._cache[v]={width:C}),P+=C,P>u&&(o||(o=s.slice(0,-1).join("")),P>e))return et.text=tt(o)+V,et.tooltext=et.oriText,et.width=_(et.text),et.height=this._lineHeight,et;return et.text=s.join(""),et.width=P,et.height=this._lineHeight,et}for(;r>D;D+=1)if(v=s[D]=F[D]," "!==v||q||(v="&nbsp;"),this._cache[v]?C=this._cache[v].width:(b&&(C=b.detailObj[v])||(C=_(v)),this._cache[v]={width:C}),P+=C,P>u&&(o||(o=s.slice(0,-1).join("")),P>e)){if(I=t.substr(0,s.length).lastIndexOf(" "),j=t.substr(0,s.length).lastIndexOf("-"),I>z?(P=_(s.slice(z+1,I).join("")),s.splice(I,1,"<br/>"),z=I,m=I+1):j>z?(j===s.length-1?(P=_(s.slice(z+1,I).join("")),s.splice(j,1,"<br/>-")):(P=_(s.slice(z+1,I).join("")),s.splice(j,1,"-<br/>")),z=j,m=j+1):(s.splice(s.length-1,1,"<br/>"+F[D]),Z=s.length-2,P=_(s.slice(z+1,Z+1).join("")),z=Z,m=D),k+=this._lineHeight,k>n)return et.text=tt(o)+V,et.tooltext=et.oriText,et.width=e,et.height=k-this._lineHeight,et;O=c(O,P),o=null,y=h.getNearestBreakIndex(t.substr(m),u,this),P=_(t.substr(m,y||1)),s.length<m+y&&(s=s.concat(t.substr(s.length,m+y-s.length).split("")),D=s.length-1)}return O=c(O,P),et.text=s.join(""),et.width=O,et.height=k,et}for(f=t.replace(h.spanAdditionRegx,"$2"),t=t.replace(h.spanAdditionRegx,h.spanAdditionReplacer),t=t.replace(/(<br\s*\/*\>)/g,'<span class="'+[h.classNameWithTag," ",h.classNameWithTagBR].join("")+'">$1</span>'),K.innerHTML=t,S=K[g.childRetriverFn](g.childRetriverString),A=0,T=S.length;T>A;A+=1)N=S[A],(g.noClassTesting||h.classNameReg.test(N.className))&&(H=N.innerHTML,""!==H&&(" "===H?Q=X.length:"-"===H&&(J=X.length),X.push({spaceIdx:Q,dashIdx:J,elem:N}),F.push(H)));if(D=0,r=X.length,C=X[0].elem.offsetWidth,C>e)return et.text="",et.width=et.oriTextWidth=et.height=et.oriTextHeight=0,et;if(C>u&&!this._showNoEllipses&&(u=e-2*Y,u>C?V="..":(u=e-Y,u>C?V=".":(u=0,V=""))),x=X[0].elem.offsetLeft,w=X[0].elem.offsetTop,i)for(;r>D;D+=1)N=X[D].elem,E=N.offsetLeft-x+N.offsetWidth,E>u&&(L||(L=D),K.offsetWidth>e&&(W=D,D=r));else for(;r>D;D+=1)N=X[D].elem,R=N.offsetHeight+(N.offsetTop-w),E=N.offsetLeft-x+N.offsetWidth,M=null,E>u?(L||(L=D),E>e&&(I=X[D].spaceIdx,j=X[D].dashIdx,I>z?(X[I].elem.innerHTML="<br/>",z=I):j>z?(X[j].elem.innerHTML=j===D?"<br/>-":"-<br/>",z=j):N.parentNode.insertBefore(M=l.createElement("br"),N),N.offsetHeight+N.offsetTop>n?(M?M.parentNode.removeChild(M):z===j?X[j].elem.innerHTML="-":X[I].elem.innerHTML=" ",W=D,D=r):L=null)):R>n&&(W=D,D=r);if(r>W){for(et.isTruncated=!0,L=L?L:W,D=r-1;D>=L;D-=1)N=X[D].elem,N.parentNode.removeChild(N);for(;D>=0;D-=1)N=X[D].elem,h.classNameBrReg.test(N.className)?N.parentNode.removeChild(N):D=0}return et.text=K.innerHTML.replace(h.spanRemovalRegx,"$1").replace(/\&amp\;/g,"&"),et.isTruncated&&(et.text+=V,et.tooltext=f),et.height=K.offsetHeight,et.width=K.offsetWidth,et}return et.error=new Error("Body Tag Missing!"),et},i.prototype.getOriSize=function(t,e){if(!this._init)return!1;var n,i,r,o,s,a=0,h=0,l={};if(!e)return this._calCharDimWithCache(t);for(n=t.split(""),o=0,s=n.length;s>o;o++)i=n[o],r=this._calCharDimWithCache(i,!0,n.length),h=c(h,r.height),a+=r.width,l[i]=r.width;return{width:f(a),height:h,detailObj:l}},i.prototype.dispose=function(){return this._init?(this._containerManager&&this._containerManager.dispose&&this._containerManager.dispose(),delete this._container,delete this._context,delete this._cache,delete this._containerManager,delete this._containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this._showNoEllipses,this):this},e["default"]=i,t.exports=e["default"]}),te=Y(Zt),ee={};ee.mergeRecursive=function(t,e){return function n(t,e){var i,r;for(i in e)if(e.hasOwnProperty(i))if(r=e[i],r instanceof Array)t[i]=r.slice(0);else if("object"==typeof r){if(null===r)continue;n(r,t[i]||(t[i]={}))}else t[i]=r}(t,e),t},ee.getSmartComputedStyle=function(t,e){var n,i,r,o="W",s={"fill-opacity":0,"stroke-opacity":0},a="string"==typeof e?e:void 0;return n=t.append("text").text(o),a?n.attr("class",a):"object"==typeof e&&(delete e["fill-opacity"],delete e["stroke-opacity"],ee.mergeRecursive(s,e)),n.style(s),i=getComputedStyle(n.node()),r={fontSize:i.fontSize,iFontSize:parseInt(i.fontSize.match(/\d+/)[0],10),fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontStyle:i.fontStyle},n.remove(),r},ee.getArgedText=function(t){var e=[];return t instanceof Array?(e[0]=t[0]||"",e[1]=t[1]||{}):(e[0]=t,e[1]={}),e},ee.applyStyleObj=function(t,e){var n;if(t.node().removeAttribute("style"),!e)return t;for(n in e)t.style(n,e[n]);return t};var ne;Q.SEPARATOR={N:"\n",S:"s",T:"	",_def:function(t,e,n){function i(t,e){var n,i,r=0;for(n=0,i=t.length;i>n;n++)r+=f[n]+u*e;return r-u*e}var r,o,s,a=0,h=0,l=t.getOriSize("W"),u=l.width,c=l.height,f=[];for(r=0,o=e.length;o>r;r++)f.push(t.getOriSize(e[r]).width);switch(n){case Q.SEPARATOR.N:s=function(t){return{x:0,y:c*t}};break;case Q.SEPARATOR.T:s=function(t){return{x:t?2*u:0,y:0}},a=i(f,2),h=a?c:a;break;case Q.SEPARATOR.S:default:s=function(t){return{x:t?.5*u:0,y:0}},a=i(f,.5),h=a?c:a}return{fn:s,oriWidth:a,oriHeight:h}}},(ne=Q.prototype).constructor=Q,ne._prepareTooltipModel=function(t){var e={},n={title:{icon:null,text:[],breakBy:Q.SEPARATOR.S},body:{icon:null,text:[],rank:1,breakBy:Q.SEPARATOR.S}};return J(n,e,t),e},ne._prepareFirables=function(t){function e(t){var e,n,i,r,o,s=[];if(t instanceof Array)for(e=0,n=t.length;n>e;e++)i=t[e],i&&"function"==typeof i&&s.push([e,i]);else r=t,o=arguments[1],i=r[o],i&&"function"==typeof i&&s.push([o,i]);return 0===s.length?null:s.map(function(e){return e.unshift(r||t),e})}var n,i,r,o,s,a,h,l,u=[],c=t.title,f=t.body;for(h=e(c.text),n=0,i=f.length;i>n;n++)for(s=f[n],r=0,o=s.length;o>r;r++)a=s[r],l=e(a.text),l&&[].push.apply(u,l),l=e(a,"rank"),l&&[].push.apply(u,l);return(h||[]).concat(u)},ne._executeFirables=function(t,e){var n,i,r,o,s=this._firables;for(n=0,i=s.length;i>n;n++)r=s[n],(o=r[2])&&"function"==typeof o&&(r[0][r[1]]=r[2](e));return this},ne.setLimit=function(t){return this.limit=t,this},ne.addData=function(t){var e;return this.data=t,e=this.model=this._prepareTooltipModel(t),this._firables=this._prepareFirables(e),this.addTitle(e.title).addBody(e.body),this},ne.addTitle=function(t){return this.title.model=t,ee.mergeRecursive(this.title.args,t.args),this},ne.addBody=function(t){return this.body.model=t,ee.mergeRecursive(this.body.args,t.args),this},ne.mountTo=function(t){return this.mountPoint=t,this},ne.mount=function(t){var e,n,i,r,o=this.mountPoint,s=this.title,a=this.body,h=s.args.className,l=a.args.className;return this.context=t||null,this._executeFirables(this.model,t),i=o.attr("class",this.baseClassName).selectAll("rect").data([1]),i=i.enter().append("rect").merge(i).attr("class",this.baseClassName+"-container"),e=o.selectAll("g."+h).data([s.model]),e.exit().remove(),e=s._graphics.g=e.enter().append("g").attr("class",h).merge(e),n=o.selectAll("g."+l).data(a.model),n.exit().remove(),n=a._graphics.g=n.enter().append("g").attr("class",l).merge(n),r=this.mountTitle(e).mountBody(n).mountComponents(),i.attr("x",0).attr("y",0).attr("height",this.verticalLimit=r.height).attr("width",this.horizontalLimit=r.width),this},ne.size=function(){return{height:this.verticalLimit,width:this.horizontalLimit}},ne.mountTitle=function(t){var e,n,i,r=this.title._graphics;return e=t.selectAll("rect").data([1]),r.container=e.enter().append("rect").merge(e).attr("class",t.attr("class")+"-container"),n=t.selectAll("path").data(function(t){return t}),n.exit().remove(),r.icon=n.enter().merge(n).append("path").merge(n).attr("class",t.attr("class")+"-icon"),i=t.selectAll("text").data(function(t){return[t.text]}),i.exit().remove(),r.text=i.enter().append("text").merge(i).attr("class",t.attr("class")+"-text"),this},ne.mountBody=function(t){var e,n,i,r,o=this.body._graphics;return n=t.selectAll("rect").data(function(t){return[t]}),o.container=n.enter().append("rect").classed(t.attr("class")+"-container",!0).merge(n),
e=t.selectAll("g").data(function(t){return t}),e.exit().remove(),e=o.unitBodyG=e.enter().append("g").merge(e),i=e.selectAll("path").data(function(t){return[t]}),i.exit().remove(),o.icon=i.enter().append("path").classed(t.attr("class")+"-icon",!0).merge(i),r=e.selectAll("text").data(function(t){return[t.text]}),r.exit().remove(),o.text=r.enter().append("text").classed(t.attr("class")+"-text",!0).merge(r),this},ne.mountComponents=function(){var t,e,n,i,r=0,o=0,s=this._mountAtomicComponent.bind(this),a=Number.NEGATIVE_INFINITY,h=this.title,l=h.args,u=h._graphics,c=this.body,f=c.args,d=c._graphics;return r=l.margin[1],o=l.margin[0],t=s(u.g,i=u.container,{icon:u.icon,text:u.text},{y:o,x:r},{padding:l.padding}),o+=t.height?t.height+l.margin[0]:t.height,a=Math.max(n=a,t.width),d.g.each(function(){var n=Xt(this),i=n.selectAll("g"),h=n.selectAll("rect");e=o,i.each(function(){var e=Xt(this),n=e.selectAll("path"),i=e.selectAll("text");r=f.margin[1],o+=f.margin[0],t=s(e,null,{icon:n,text:i},{y:o,x:r},{padding:f.padding}),o+=t.height+f.margin[0],a=Math.max(a,t.width+f.margin[1])}),h.attr("x",r).attr("y",e).attr("width",a).attr("height",o-e),o+=f.margin[0]}),a>n&&i.attr("width",a),a+=2*f.margin[1],o+=l.margin[1]-f.margin[0],{height:o,width:a}},ne._mountAtomicComponent=function(t,e,n,i,r){var o,s,a,h,l=0,u=this.smartlabel,c=r.padding[2]||0,f=r.padding[1],d=r.padding[0];return h=n.text.selectAll("tspan").data(function(e){return a=Q.SEPARATOR._def(u.setStyle(ee.getSmartComputedStyle(t)),e,t.datum().breakBy),e}),n.icon.attr("d",function(t){var e,n,r;return(e=t.icon)&&"function"==typeof e?(n=e(.5*a.oriHeight+i.x+f,.5*a.oriHeight+i.y+d,.5*a.oriHeight,this.context),n&&(l=a.oriHeight),r=ee.getArgedText(n),ee.applyStyleObj(Xt(this),r[1].style),r[0]):void 0}),h.exit().remove(),h.enter().append("tspan").merge(h).text(function(t){var e=ee.getArgedText(t),n=e[1].style;return ee.applyStyleObj(Xt(this),n),e[0]}).attr("dx",function(t,e){return a.fn(e).x}),n.text.attr("x",l+c+i.x+f).attr("y",i.y+d).attr("dy","0.92em"),o=l+c+a.oriWidth+2*f,s=a.oriHeight?a.oriHeight+2*d:a.oriHeight,e&&e.attr("x",i.x).attr("y",i.y).attr("height",s).attr("width",o),{height:s,width:o}},t.tooltip=Z,Object.defineProperty(t,"__esModule",{value:!0})});